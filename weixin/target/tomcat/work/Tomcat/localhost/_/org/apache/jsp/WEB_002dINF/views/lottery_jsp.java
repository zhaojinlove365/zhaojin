/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2017-09-05 07:54:03 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.views;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class lottery_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=utf-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("    <style type=\"text/css\">\r\n");
      out.write("        body,ul,ol,li,p,h1,h2,h3,h4,h5,h6,form,fieldset,table,td,img,div{margin:0;padding:0;border:0;}\r\n");
      out.write("        body{color:#333; font-size:12px;font-family:\"Microsoft YaHei\"}\r\n");
      out.write("        ul,ol{list-style-type:none;}\r\n");
      out.write("        select,input,img,select{vertical-align:middle;}\r\n");
      out.write("        input{ font-size:12px;}\r\n");
      out.write("        a{ text-decoration:none; color:#000;}\r\n");
      out.write("        a:hover{color:#c00; text-decoration:none;}\r\n");
      out.write("        .clear{clear:both;}\r\n");
      out.write("\r\n");
      out.write("        /* 大转盘样式 */\r\n");
      out.write("        .banner{display:block;width:95%;margin-left:auto;margin-right:auto;margin-bottom: 20px;}\r\n");
      out.write("        .banner .turnplate{display:block;width:100%;position:relative;}\r\n");
      out.write("        .banner .turnplate canvas.item{width:100%;}\r\n");
      out.write("        .banner .turnplate img.pointer{position:absolute;width:36%;height:40%;left:32%;top:28%;}\r\n");
      out.write("        .more{display: block;width: 100%;position: fixed;top: 0;left: 0;height: 150px;}\r\n");
      out.write("        .cloud{position: fixed;left: 0;top: 70%;width: 150px;}\r\n");
      out.write("        .cloud2{position: fixed;right: 0;top: 32%;width: 50px;}\r\n");
      out.write("        .cloud3{position: fixed;left: 0;top: 30%;width: 100px;}\r\n");
      out.write("        @media screen and (max-width: 320px) {\r\n");
      out.write("            .cloud{position: fixed;left: 0;top: 70%;width: 150px;}\r\n");
      out.write("            .cloud2{position: fixed;right: 0;top: 30%;width: 50px;}\r\n");
      out.write("            .cloud3{position: fixed;left: 0;top: 23%;width: 100px;}\r\n");
      out.write("        }\r\n");
      out.write("        @media screen and (min-width: 321px) and (max-width: 375px) {\r\n");
      out.write("            .cloud{position: fixed;left: 0;top: 72%;width: 150px;}\r\n");
      out.write("            .cloud2{position: fixed;right: 0;top: 32%;width: 50px;}\r\n");
      out.write("            .cloud3{position: fixed;left: 0;top: 25%;width: 100px;}\r\n");
      out.write("        }\r\n");
      out.write("        @media screen and (min-width: 376px) {\r\n");
      out.write("            .cloud{position: fixed;left: 0;top: 68%;width: 150px;}\r\n");
      out.write("            .cloud2{position: fixed;right: 0;top: 32%;width: 50px;}\r\n");
      out.write("            .cloud3{position: fixed;left: 0;top: 25%;width: 100px;}\r\n");
      out.write("        }\r\n");
      out.write("        @media screen and (max-height: 480px) {\r\n");
      out.write("            .cloud{position: fixed;left: 0;top: 81%;width: 150px;}\r\n");
      out.write("            .cloud2{position: fixed;right: 0;top: 35%;width: 50px;}\r\n");
      out.write("            .cloud3{position: fixed;left: 0;top: 27%;width: 100px;}\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        #mark{width: 100%;height: 100%;background: rgba(0,0,0,0.5);position: fixed;top: 0;left: 0;display: none;}\r\n");
      out.write("        .red-img{position: fixed;top: 10%;left: 5%;width: 90%;}\r\n");
      out.write("    </style>\r\n");
      out.write("\r\n");
      out.write("    <script type=\"text/javascript\" src=\"/cssssss/HTML5/js/jquery-1.10.2.js\"></script>\r\n");
      out.write("    <script type=\"text/javascript\" src=\"/cssssss/HTML5/js/awardRotate.js\"></script>\r\n");
      out.write("\r\n");
      out.write("    <script type=\"text/javascript\">\r\n");
      out.write("        var turnplate={\r\n");
      out.write("            restaraunts:[],\t\t\t\t//大转盘奖品名称\r\n");
      out.write("            colors:[],\t\t\t\t\t//大转盘奖品区块对应背景颜色\r\n");
      out.write("            outsideRadius:192,\t\t\t//大转盘外圆的半径\r\n");
      out.write("            textRadius:155,\t\t\t\t//大转盘奖品位置距离圆心的距离\r\n");
      out.write("            insideRadius:68,\t\t\t//大转盘内圆的半径\r\n");
      out.write("            startAngle:0,\t\t\t\t//开始角度\r\n");
      out.write("\r\n");
      out.write("            bRotate:false\t\t\t\t//false:停止;ture:旋转\r\n");
      out.write("        };\r\n");
      out.write("\r\n");
      out.write("        $(document).ready(function(){\r\n");
      out.write("            //动态添加大转盘的奖品与奖品区域背景颜色\r\n");
      out.write("            turnplate.restaraunts = [\"咖喱蛋糕\", \"人品极佳\", \"辣味蛋糕\", \"java半年券\", \"蛋黄酱拌果冻\", \" 遛得上天\", \"草莓蛋糕\", \"猴赛雷  \"];\r\n");
      out.write("            turnplate.colors = [\"#FFFFFF\",\"#f6da9e\", \"#FFFFFF\", \"#f6da9e\", \"#FFFFFF\",\"#f6da9e\", \"#FFFFFF\", \"#f6da9e\" ];\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("            var rotateTimeOut = function (){\r\n");
      out.write("                $('#wheelcanvas').rotate({\r\n");
      out.write("                    angle:0,\r\n");
      out.write("                    animateTo:2160,\r\n");
      out.write("                    duration:8000,\r\n");
      out.write("                    callback:function (){\r\n");
      out.write("                        alert('网络超时，请检查您的网络设置！');\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            };\r\n");
      out.write("\r\n");
      out.write("            //旋转转盘 item:奖品位置; txt：提示语;\r\n");
      out.write("            var rotateFn = function (item, txt){\r\n");
      out.write("                var angles = item * (360 / turnplate.restaraunts.length) - (360 / (turnplate.restaraunts.length*2));\r\n");
      out.write("                if(angles<270){\r\n");
      out.write("                    angles = 270 - angles;\r\n");
      out.write("                }else{\r\n");
      out.write("                    angles = 360 - angles + 270;\r\n");
      out.write("                }\r\n");
      out.write("                $('#wheelcanvas').stopRotate();\r\n");
      out.write("                $('#wheelcanvas').rotate({\r\n");
      out.write("                    angle:0,\r\n");
      out.write("                    animateTo:angles+1800,\r\n");
      out.write("                    duration:1000,\r\n");
      out.write("                    callback:function (){\t//回调\r\n");
      out.write("                        alert(\"恭喜 -");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${username}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("- 获得:\"+txt);\r\n");
      out.write("                        var lot = $(\"#lotteryController\");\r\n");
      out.write("                        lot.attr(\"action\",\"/lottery.do?present=\"+txt);\r\n");
      out.write("                        lot.submit();\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            };\r\n");
      out.write("\r\n");
      out.write("            $('.pointer').click(function (){\r\n");
      out.write("                if(turnplate.bRotate)return;\r\n");
      out.write("                turnplate.bRotate = !turnplate.bRotate;\r\n");
      out.write("                //获取随机数(奖品个数范围内)\r\n");
      out.write("                var item = rnd(1,turnplate.restaraunts.length);\r\n");
      out.write("                //奖品数量等于10,指针落在对应奖品区域的中心角度[252, 216, 180, 144, 108, 72, 36, 360, 324, 288]\r\n");
      out.write("                rotateFn(item, turnplate.restaraunts[item-1]);\r\n");
      out.write("                /* switch (item) {\r\n");
      out.write("                 case 1:\r\n");
      out.write("                 rotateFn(252, turnplate.restaraunts[0]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 2:\r\n");
      out.write("                 rotateFn(216, turnplate.restaraunts[1]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 3:\r\n");
      out.write("                 rotateFn(180, turnplate.restaraunts[2]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 4:\r\n");
      out.write("                 rotateFn(144, turnplate.restaraunts[3]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 5:\r\n");
      out.write("                 rotateFn(108, turnplate.restaraunts[4]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 6:\r\n");
      out.write("                 rotateFn(72, turnplate.restaraunts[5]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 7:\r\n");
      out.write("                 rotateFn(36, turnplate.restaraunts[6]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 8:\r\n");
      out.write("                 rotateFn(360, turnplate.restaraunts[7]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 9:\r\n");
      out.write("                 rotateFn(324, turnplate.restaraunts[8]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 case 10:\r\n");
      out.write("                 rotateFn(288, turnplate.restaraunts[9]);\r\n");
      out.write("                 break;\r\n");
      out.write("                 } */\r\n");
      out.write("                console.log(item);\r\n");
      out.write("            });\r\n");
      out.write("        });\r\n");
      out.write("\r\n");
      out.write("        function rnd(n, m){\r\n");
      out.write("            var random = Math.floor(Math.random()*(m-n+1)+n);\r\n");
      out.write("            return random;\r\n");
      out.write("\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("        //页面所有元素加载完毕后执行drawRouletteWheel()方法对转盘进行渲染\r\n");
      out.write("        window.onload=function(){\r\n");
      out.write("            drawRouletteWheel();\r\n");
      out.write("        };\r\n");
      out.write("\r\n");
      out.write("        function drawRouletteWheel() {\r\n");
      out.write("            var canvas = document.getElementById(\"wheelcanvas\");\r\n");
      out.write("            if (canvas.getContext) {\r\n");
      out.write("                //根据奖品个数计算圆周角度\r\n");
      out.write("                var arc = Math.PI / (turnplate.restaraunts.length/2);\r\n");
      out.write("                var ctx = canvas.getContext(\"2d\");\r\n");
      out.write("                //在给定矩形内清空一个矩形\r\n");
      out.write("                ctx.clearRect(0,0,422,422);\r\n");
      out.write("                //strokeStyle 属性设置或返回用于笔触的颜色、渐变或模式\r\n");
      out.write("                ctx.strokeStyle = \"#FFBE04\";\r\n");
      out.write("                //font 属性设置或返回画布上文本内容的当前字体属性\r\n");
      out.write("                ctx.font = 'bold 18px Microsoft YaHei';\r\n");
      out.write("                for(var i = 0; i < turnplate.restaraunts.length; i++) {\r\n");
      out.write("                    var angle = turnplate.startAngle + i * arc;\r\n");
      out.write("                    ctx.fillStyle = turnplate.colors[i];\r\n");
      out.write("                    ctx.beginPath();\r\n");
      out.write("                    //arc(x,y,r,起始角,结束角,绘制方向) 方法创建弧/曲线（用于创建圆或部分圆）\r\n");
      out.write("                    ctx.arc(211, 211, turnplate.outsideRadius, angle, angle + arc, false);\r\n");
      out.write("                    ctx.arc(211, 211, turnplate.insideRadius, angle + arc, angle, true);\r\n");
      out.write("                    ctx.stroke();\r\n");
      out.write("                    ctx.fill();\r\n");
      out.write("                    //锁画布(为了保存之前的画布状态)\r\n");
      out.write("                    ctx.save();\r\n");
      out.write("\r\n");
      out.write("                    //改变画布文字颜色\r\n");
      out.write("                    var b = i+2;\r\n");
      out.write("                    if(b%2){\r\n");
      out.write("                        ctx.fillStyle = \"#FFFFFF\";\r\n");
      out.write("                    }else{\r\n");
      out.write("                        ctx.fillStyle = \"#E5302F\";\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    //----绘制奖品开始----\r\n");
      out.write("                    var text = turnplate.restaraunts[i];\r\n");
      out.write("                    var line_height = 17;\r\n");
      out.write("                    //translate方法重新映射画布上的 (0,0) 位置\r\n");
      out.write("                    ctx.translate(211 + Math.cos(angle + arc / 2) * turnplate.textRadius, 211 + Math.sin(angle + arc / 2) * turnplate.textRadius);\r\n");
      out.write("\r\n");
      out.write("                    //rotate方法旋转当前的绘图\r\n");
      out.write("                    ctx.rotate(angle + arc / 2 + Math.PI / 2);\r\n");
      out.write("\r\n");
      out.write("                    /** 下面代码根据奖品类型、奖品名称长度渲染不同效果，如字体、颜色、图片效果。(具体根据实际情况改变) **/\r\n");
      out.write("                    if(text.indexOf(\"盘\")>0){//判断字符进行换行\r\n");
      out.write("                        var texts = text.split(\"盘\");\r\n");
      out.write("                        for(var j = 0; j<texts.length; j++){\r\n");
      out.write("                            ctx.font = j == 0?'bold 20px Microsoft YaHei':'bold 18px Microsoft YaHei';\r\n");
      out.write("                            if(j == 0){\r\n");
      out.write("                                ctx.fillText(texts[j]+\"盘\", -ctx.measureText(texts[j]+\"盘\").width / 2, j * line_height);\r\n");
      out.write("                            }else{\r\n");
      out.write("                                ctx.fillText(texts[j], -ctx.measureText(texts[j]).width / 2, j * line_height*1.2); //调整行间距\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                    }else if(text.indexOf(\"盘\") == -1 && text.length>8){//奖品名称长度超过一定范围\r\n");
      out.write("                        text = text.substring(0,8)+\"||\"+text.substring(8);\r\n");
      out.write("                        var texts = text.split(\"||\");\r\n");
      out.write("                        for(var j = 0; j<texts.length; j++){\r\n");
      out.write("                            ctx.fillText(texts[j], -ctx.measureText(texts[j]).width / 2, j * line_height);\r\n");
      out.write("                        }\r\n");
      out.write("                    }else{\r\n");
      out.write("\r\n");
      out.write("                        //在画布上绘制填色的文本。文本的默认颜色是黑色\r\n");
      out.write("\r\n");
      out.write("                        //measureText()方法返回包含一个对象，该对象包含以像素计的指定字体宽度\r\n");
      out.write("                        ctx.fillText(text, -ctx.measureText(text).width / 2, 0);\r\n");
      out.write("                    }\r\n");
      out.write("\r\n");
      out.write("                    //添加对应图标\r\n");
      out.write("\r\n");
      out.write("                    if(text.indexOf(turnplate.restaraunts[0])>=0){\r\n");
      out.write("                        var img= document.getElementById(\"diy1-img\");\r\n");
      out.write("                        img.onload=function(){\r\n");
      out.write("                            ctx.drawImage(img,-35,20);\r\n");
      out.write("                        };\r\n");
      out.write("                        ctx.drawImage(img,-35,20);\r\n");
      out.write("                    };\r\n");
      out.write("                    if(text.indexOf(turnplate.restaraunts[1])>=0){\r\n");
      out.write("                        var img= document.getElementById(\"shan-img\");\r\n");
      out.write("                        img.onload=function(){\r\n");
      out.write("                            ctx.drawImage(img,-35,20);\r\n");
      out.write("                        };\r\n");
      out.write("                        ctx.drawImage(img,-35,20);\r\n");
      out.write("                    };\r\n");
      out.write("                    if(text.indexOf(turnplate.restaraunts[2])>=0){\r\n");
      out.write("                        var img= document.getElementById(\"diy5-img\");\r\n");
      out.write("                        img.onload=function(){\r\n");
      out.write("                            ctx.drawImage(img,-25,35);\r\n");
      out.write("                        };\r\n");
      out.write("                        ctx.drawImage(img,-30,35);\r\n");
      out.write("                    };\r\n");
      out.write("                    if(text.indexOf(turnplate.restaraunts[3])>=0){\r\n");
      out.write("                        var img= document.getElementById(\"shan-img\");\r\n");
      out.write("                        img.onload=function(){\r\n");
      out.write("                            ctx.drawImage(img,-35,20);\r\n");
      out.write("                        };\r\n");
      out.write("                        ctx.drawImage(img,-35,20);\r\n");
      out.write("                    };\r\n");
      out.write("                    if(text.indexOf(turnplate.restaraunts[4])>=0){\r\n");
      out.write("                        var img= document.getElementById(\"diy3-img\");\r\n");
      out.write("                        img.onload=function(){\r\n");
      out.write("                            ctx.drawImage(img,-30,20);\r\n");
      out.write("                        };\r\n");
      out.write("                        ctx.drawImage(img,-30,20);\r\n");
      out.write("                    };\r\n");
      out.write("                    if(text.indexOf(turnplate.restaraunts[5])>=0){\r\n");
      out.write("                        var img= document.getElementById(\"shan-img\");\r\n");
      out.write("                        img.onload=function(){\r\n");
      out.write("                            ctx.drawImage(img,-35,20);\r\n");
      out.write("                        };\r\n");
      out.write("                        ctx.drawImage(img,-35,20);\r\n");
      out.write("                    };\r\n");
      out.write("                    if(text.indexOf(turnplate.restaraunts[6])>=0){\r\n");
      out.write("                        var img= document.getElementById(\"diy2-img\");\r\n");
      out.write("                        img.onload=function(){\r\n");
      out.write("                            ctx.drawImage(img,-30,20);\r\n");
      out.write("                        };\r\n");
      out.write("                        ctx.drawImage(img,-30,20);\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    if(text.indexOf(turnplate.restaraunts[7])>=0){\r\n");
      out.write("                        var img= document.getElementById(\"shan-img\");\r\n");
      out.write("                        img.onload=function(){\r\n");
      out.write("                            ctx.drawImage(img,-35,20);\r\n");
      out.write("                        };\r\n");
      out.write("                        ctx.drawImage(img,-35,20);\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                    //把当前画布返回（调整）到上一个save()状态之前\r\n");
      out.write("                    ctx.restore();\r\n");
      out.write("                    //----绘制奖品结束----\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("        };\r\n");
      out.write("    </script>\r\n");
      out.write("</head>\r\n");
      out.write("<body style=\"background:url(/cssssss/HTML5/images/body_bg.jpg);background-size:cover;\">\r\n");
      out.write("<img src=\"/cssssss/HTML5/images/4.png\" id=\"shan-img\" style=\"display:none;\" />\r\n");
      out.write("<img src=\"/cssssss/HTML5/images/3.png\" id=\"diy2-img\" style=\"display:none;\" />\r\n");
      out.write("<img src=\"/cssssss/HTML5/images/5.png\" id=\"diy1-img\" style=\"display:none;\" />\r\n");
      out.write("<img src=\"/cssssss/HTML5/images/6.png\" id=\"diy3-img\" style=\"display:none;\" />\r\n");
      out.write("<img src=\"/cssssss/HTML5/images/7.png\" id=\"diy4-img\" style=\"display:none;\" />\r\n");
      out.write("<img src=\"/cssssss/HTML5/images/7.png\" id=\"diy5-img\" style=\"display:none;\" />\r\n");
      out.write("<div class=\"banner\" style=\"margin-top: 35%\">\r\n");
      out.write("    <div class=\"turnplate\" style=\"background-image:\r\n");
      out.write("    url(/cssssss/HTML5/images/cj_bg.png);background-size:100% 100%;\">\r\n");
      out.write("        <canvas class=\"item\" id=\"wheelcanvas\" width=\"422px\" height=\"422px\"></canvas>\r\n");
      out.write("        <img class=\"pointer\" src=\"/cssssss/HTML5/images/jt2.png\"/>\r\n");
      out.write("    </div>\r\n");
      out.write("</div>\r\n");
      out.write("<form action=\"/lottery.do\" id=\"lotteryController\" method=\"post\"></form>\r\n");
      out.write("\r\n");
      out.write('\r');
      out.write('\n');
      out.write('\r');
      out.write('\n');
      out.write('\r');
      out.write('\n');
      out.write("\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
